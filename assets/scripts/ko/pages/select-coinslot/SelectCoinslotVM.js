var src="/public/plugins/charging-station/assets/scripts/ko";define(["knockout","rootVM","toast","http","app/observables/payment","app/observables/device","app/observables/customer","modal","timerConfig","app/utils/array.includes",src+"/components/wallet-prompt/WalletPrompt.js"],function(ko,rootVM,toast,http,payment,device,customer,modal,timerConfig,includes){return function(){var self=this;self.selectedId=ko.observable(""),self.loading=ko.observable(!0),self.coinslots=ko.observableArray([]),self.koDescendantsComplete=function(){rootVM.showingStatusNav(!1),rootVM.showingBanners(!0),rootVM.showingSessionsTable(!1),http.get("/client/coinslots?rate_type=charging",function(err,coinslots){return err?http.catchError(err):(self.coinslots(coinslots),self.loading(!1),void(0<customer.credits()?modal.show("charging-wallet-prompt",{customer:customer,charging_port_id:payment.intent()}):1===coinslots.length&&self.selectCoinslot(coinslots[0].id)))})},self.selectCoinslot=function(params){self.selectedId(params),self.loading(!0);params={coinslot_id:params,charging_port_id:payment.intent(),wait_payment_seconds:timerConfig.wait_payment_seconds,max_payment_retries:timerConfig.max_payment_retries};http.post("/charging-plugin/payments/que",params,function(err){err?(http.catchError(err),self.loading(!1)):rootVM.navigate("charging-insert-coin")})}}});