!function(){var is_default_btn,scope,http=require("http"),ko=require("knockout");var cache_bust=Math.random().toString().replace(".","");http.get("/charging-plugin/portal-settings?cache_bust="+cache_bust,function(x,resp){var cb,lapse,interval;is_default_btn=resp&&resp.captive_portal&&resp.captive_portal.use_default_button,"function"==typeof(cb=function(viewModel){var btn;is_default_btn&&"more-buttons"===viewModel&&((btn=document.getElementById("charging-station-btn"))||((btn=document.createElement("a")).classList.add("btn"),btn.classList.add("btn-lg"),btn.classList.add("btn-block"),btn.classList.add("btn-primary"),btn.setAttribute("data-bind","navigate: 'buy-charging'"),btn.innerHTML="Charging Station",btn.id="charging-station-btn",btn.style["padding-left"]="6px",(viewModel=document.querySelector(".container .btn-block[data-bind]").parentNode)&&(viewModel.insertBefore(btn,viewModel.children[1]),viewModel=ko.contextFor(viewModel.parentNode),ko.applyBindings(viewModel,btn)))),http.get("/client/payments/current?cache_bust="+cache_bust,function(x,resp){resp&&"charging_plugin"===resp.source&&(require("app/observables/payment").rateType("charging"),(scope=ko.contextFor(document.querySelector('[data-bind*="$root.currentPage"]'))).$root.navigate("charging-insert-coin"))})})&&(lapse=0,interval=setInterval(function(){var el=document.querySelector('[data-bind*="$root.currentPage"]');el&&((scope=ko.contextFor(el)).$root.currentPage.subscribe(function(page){setTimeout(function(){cb(page)},90)}),setTimeout(function(){cb(scope.$root.currentPage())},90),clearInterval(interval)),5e3<=(lapse+=100)&&clearInterval(interval)},100))}),require(["/public/plugins/charging-station/assets/scripts/ko/main.js"])}();